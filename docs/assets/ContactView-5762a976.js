import{p as O,r,o as R,c as i,d,_ as U,u as x,a as B,b as S,e as g,f as t,w as P,i as C,n as h,t as s,q as T,v as V,F as N,g as E,h as L}from"./index-638978d0.js";import{H as J,F as X,c as F}from"./Footer-e028867c.js";import{a as j}from"./api-service-664abc7f.js";const W=O({__name:"vueRecaptcha",props:{sitekey:{type:String,required:!0},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"light"},hl:{type:String,required:!1},loadingTimeout:{type:Number,required:!1,default:0}},emits:{verify:n=>n!=null&&n!="",error:n=>n,expire:null,fail:null},setup(n,{expose:a,emit:_}){const e=n,y=r(null);let v=null;a({execute:function(){window.grecaptcha.execute(v)},reset:function(){window.grecaptcha.reset(v)}});function p(){v=window.grecaptcha.render(y.value,{sitekey:e.sitekey,theme:e.theme,size:e.size,callback:c=>_("verify",c),"expired-callback":()=>_("expire"),"error-callback":()=>_("fail")})}return R(()=>{window.grecaptcha==null?new Promise((c,m)=>{let u,o=!1;window.recaptchaReady=function(){o||(o=!0,clearTimeout(u),c())};const w="recaptcha-script",l=A=>()=>{var H;o||(o=!0,clearTimeout(u),(H=document.getElementById(w))==null||H.remove(),m(A))};e.loadingTimeout>0&&(u=setTimeout(l("timeout"),e.loadingTimeout));const q=window.document,f=q.createElement("script");f.id=w,f.onerror=l("error"),f.onabort=l("aborted"),f.setAttribute("src",`https://www.google.com/recaptcha/api.js?onload=recaptchaReady&render=explicit&hl=${e.hl}&_=${+new Date}`),q.head.appendChild(f)}).then(()=>{p()}).catch(c=>{_("error",c)}):p()}),(c,m)=>(i(),d("div",{ref_key:"recaptchaDiv",ref:y},null,512))}}),Y="/assets/img/contact_info.webp",Z={components:{Header:J,Footer:X,vueRecaptcha:W},setup(){const n=x(),{locale:a}=B(),_=r(""),e=r(""),y=r(""),v=r(""),p=r(""),c=r([]),m=r(!1),u=r(!1),o=r(""),w=async b=>{await F.removeCart(b),c.value=F.getCart()},l=r({contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1}),q=()=>{c.value=F.getCart()},f=b=>{o.value=b},A=async()=>{if(!o.value){console.error("Please complete the reCAPTCHA");return}m.value=!0;let b=[];for(let k in c.value){let z=c.value[k].product.product_detail.find(M=>M.language==a.value&&M.meta_key=="title").meta_value??"",D=c.value[k].category.length>0?c.value[k].category[0].get_title_attribute.find(M=>M.language==a.value).meta_value:"";b.push({title:z,category:D,id:c.value[k].product.id})}const I=await j.sendContact({contact_name:_.value,contact_company:e.value,contact_phone:y.value,contact_email:v.value,contact_content:p.value,cart:JSON.stringify(b),recaptcha_token:o.value});if(l.value={contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1},I.hasOwnProperty("errors"))for(let k in I.errors)l.value[k]=!0;m.value=!1,I.hasOwnProperty("success")&&(u.value=!0)},H=()=>{n.push({name:"home"})};return R(()=>{q()}),{locale:a,contact_name:_,contact_company:e,contact_phone:y,contact_email:v,contact_content:p,removeCartItem:w,cartItem:c,submitContact:A,errorMsg:l,isModalOpen:u,goHome:H,isSending:m,onVerify:f}}},G={id:"contact"},K=t("div",{class:"banner",style:{"background-image":"url('/assets/img/contact_banner.webp')"}},null,-1),Q={class:"container"},$={class:"row"},tt={class:"col-12 list",id:"contact_content"},et={class:"row"},ot={class:"col-12 route"},nt=t("span",{class:"material-icons"},"",-1),at={class:"col-12"},ct={class:"contact-container"},st={class:"row"},lt=["innerHTML"],rt={class:"row"},it={for:"contact_name"},dt={for:"contact_company"},_t={class:"row"},mt={for:"contact_phone"},ut={for:"contact_email"},ht={class:"row"},vt={class:"col-12"},pt={for:"contact_content"},ft={class:"col-12"},gt={class:"contact-container"},yt=t("hr",null,null,-1),wt={class:"row mt-3"},bt={class:"col-12 secondHeading"},kt={key:0,class:"row mt-3"},Ct={class:"row"},Tt={class:"col-10"},Vt=["onClick"],qt=t("div",null,"X",-1),Ht=[qt],Mt={key:1,class:"row mt-3"},St={class:"col-12 askPriceContent"},Pt=t("hr",null,null,-1),At={class:"row mt-3"},It={class:"col-12"},Ft={class:"row mt-3"},Nt={class:"col-12"},Rt={key:1,class:"btn btn-secondary"},zt=t("div",{class:"contact_bottom"},[t("img",{src:Y})],-1),Dt=t("div",{id:"mid_right_shape"},null,-1),Ot=t("div",{id:"bottom_left_shape"},null,-1),Ut={key:0,class:"modal",style:{display:"block"}},xt={class:"modal-dialog"},Bt={class:"modal-content"},Et={class:"modal-header"},Lt={class:"modal-title"},Jt={class:"modal-body"},Xt={class:"modal-footer"};function jt(n,a,_,e,y,v){const p=S("Header"),c=S("router-link"),m=S("vue-recaptcha"),u=S("Footer");return i(),d(N,null,[g(p),t("main",G,[K,t("div",Q,[t("div",$,[t("div",tt,[t("div",et,[t("div",ot,[nt,g(c,{to:{name:"home"}},{default:P(()=>[C(s(n.$t("header.index")),1)]),_:1}),C(" / "),g(c,{to:{name:"contact"}},{default:P(()=>[C(s(n.$t("header.contact")),1)]),_:1})]),t("form",null,[t("div",at,[t("div",ct,[t("div",st,[t("div",{class:"col-12 heading",innerHTML:n.$t("contact.heading")},null,8,lt)]),t("div",rt,[t("div",{class:h(["col-sm-6 col-12 required",e.contact_name.length>0?"hasContent":""])},[t("label",it,s(e.contact_name.length==0?n.$t("contact.name"):""),1),T(t("input",{type:"text",id:"contact_name",name:"contact_name","onUpdate:modelValue":a[0]||(a[0]=o=>e.contact_name=o),class:h(["form-control",e.errorMsg.contact_name?"error":""])},null,2),[[V,e.contact_name]])],2),t("div",{class:h(["col-sm-6 col-12 required",e.contact_company.length>0?"hasContent":""])},[t("label",dt,s(e.contact_company.length==0?n.$t("contact.company"):""),1),T(t("input",{type:"text",class:h(["form-control",e.errorMsg.contact_company?"error":""]),id:"contact_company","onUpdate:modelValue":a[1]||(a[1]=o=>e.contact_company=o),name:"contact_company"},null,2),[[V,e.contact_company]])],2)]),t("div",_t,[t("div",{class:h(["col-sm-6 col-12 required",e.contact_phone.length>0?"hasContent":""])},[t("label",mt,s(e.contact_phone.length==0?n.$t("contact.phone"):""),1),T(t("input",{type:"text",class:h(["form-control",e.errorMsg.contact_phone?"error":""]),id:"contact_phone","onUpdate:modelValue":a[2]||(a[2]=o=>e.contact_phone=o),name:"contact_phone"},null,2),[[V,e.contact_phone]])],2),t("div",{class:h(["col-sm-6 col-12 required",e.contact_email.length>0?"hasContent":""])},[t("label",ut,s(e.contact_email.length==0?n.$t("contact.email"):""),1),T(t("input",{type:"email",class:h(["form-control",e.errorMsg.contact_email?"error":""]),id:"contact_email","onUpdate:modelValue":a[3]||(a[3]=o=>e.contact_email=o),name:"contact_email"},null,2),[[V,e.contact_email]])],2)]),t("div",ht,[t("div",vt,[t("label",pt,s(e.contact_content.length==0?n.$t("contact.content"):""),1),T(t("textarea",{class:"form-control",id:"contact_content",name:"contact_content",rows:"15","onUpdate:modelValue":a[4]||(a[4]=o=>e.contact_content=o)},null,512),[[V,e.contact_content]])])])])]),t("div",ft,[t("div",gt,[yt,t("div",wt,[t("div",bt,s(n.$t("contact.askingPrice")),1)]),e.cartItem.length?(i(),d("div",kt,[(i(!0),d(N,null,E(e.cartItem,(o,w)=>(i(),d("div",{class:"col-12 askPriceContent",key:w},[t("div",Ct,[t("div",Tt,[C(" ・"),g(c,{to:{name:"product-detail",params:{id:o.product.id}},class:"category"},{default:P(()=>[C(s(o.category.length>0?o.category[1].get_title_attribute.find(l=>l.language==e.locale).meta_value:""),1)]),_:2},1032,["to"]),g(c,{class:"product",to:{name:"product-detail",params:{id:o.product.id}}},{default:P(()=>[C(" > "+s(o.product.product_detail.find(l=>l.language==e.locale&&l.meta_key=="title").meta_value??""),1)]),_:2},1032,["to"])]),t("div",{class:"col-2 remove",onClick:l=>e.removeCartItem(o.product.id)},Ht,8,Vt)])]))),128))])):(i(),d("div",Mt,[t("div",St,s(n.$t("contact.askingPriceEmpty")),1)])),Pt,t("div",At,[t("div",It,[g(m,{sitekey:"6Ldml2YqAAAAAC4kqgtZmD6cJa6tNi_m0fkovXdw",size:"normal",theme:"light",hl:"zh-TW",onVerify:e.onVerify,ref:"vueRecaptcha"},null,8,["onVerify"])])]),t("div",Ft,[t("div",Nt,[e.isSending?(i(),d("div",Rt,s(n.$t("contact.isSending")),1)):(i(),d("div",{key:0,class:"btn btn-danger",onClick:a[5]||(a[5]=o=>e.submitContact())},s(n.$t("contact.submit")),1))])])])])])])])])]),zt,Dt,Ot]),e.isModalOpen?(i(),d("div",Ut,[t("div",xt,[t("div",Bt,[t("div",Et,[t("h5",Lt,s(n.$t("contact.successTitle")),1),t("button",{type:"button",class:"btn-close",onClick:a[6]||(a[6]=o=>e.goHome())})]),t("div",Jt,[t("p",null,s(n.$t("contact.success")),1)]),t("div",Xt,[t("button",{type:"button",class:"btn btn-secondary",onClick:a[7]||(a[7]=o=>e.goHome())},s(n.$t("contact.close")),1)])])])])):L("",!0),g(u)],64)}const Gt=U(Z,[["render",jt]]);export{Gt as default};
