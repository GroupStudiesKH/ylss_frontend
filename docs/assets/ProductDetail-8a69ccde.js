import{_ as N,a as T,r as h,l as B,o as D,b as C,c as s,d as c,e as b,f as t,t as i,i as f,F as I,g as H,h as w,n as E}from"./index-b0458b80.js";import{H as L,F as S,c as M}from"./Footer-f7b4b70a.js";import{P as j}from"./ProductMenu-0852cd6b.js";import{a as F}from"./api-service-664abc7f.js";const x={components:{Header:L,Footer:S,ProductMenu:j},setup(){const{locale:r}=T(),d=h({}),_=h({}),e=B(),y=h(e.params.id),v=h(!1),g=h([]),k=async()=>{try{d.value=await F.getProducts()}catch(o){console.error("Error fetching products content:",o)}},P=async()=>{try{_.value=await F.getProduct(y.value),_.value.category_id&&a(_.value.category_id)}catch(o){console.error("Error fetching product content:",o)}},a=async o=>{try{const n=await F.getCategoryPath(o);g.value=n}catch(n){console.log(n)}},m=(o,n)=>{let V=n=="feature_image"?"/assets/img/product_image.png?t=202403031739":"";return o.product_detail.find(l=>l.language==r.value&&l.meta_key==n).meta_value!=null&&o.product_detail.find(l=>l.language==r.value&&l.meta_key==n).meta_value!=""?o.product_detail.find(l=>l.language==r.value&&l.meta_key==n).meta_value:V},u=()=>{M.addCart({product:_.value,category:g.value}),v.value=!0},p=()=>{M.removeCart(y),v.value=!1};return D(async()=>{k(),P()}),{locale:r,products:d,product:_,addCartItem:u,removeCartItem:p,checkCart:v,getInfo:m,getCategoryPath:a,categoryPath:g}}},z={id:"product_detail"},A=t("div",{class:"banner",style:{"background-image":"url('/assets/img/product_banner.webp')"}},null,-1),O={class:"container"},R={class:"row"},W={class:"col-12 col-lg-10 list",id:"product_detail_content"},q={key:0,class:"row mb-5"},G={class:"col-12 route"},J=t("span",{class:"material-icons"},"",-1),Q=["href"],U=["href"],X={key:0},Y=["href"],Z={class:"col-4 col-md-6"},K=["src"],$={class:"col-8 col-md-6 justify-content-between",style:{display:"grid"}},ee={class:"title"},te=t("hr",{style:{"border-top":"5px solid #666"}},null,-1),oe=["innerHTML"],ae=t("span",{class:"material-icons"},"",-1),re=t("span",{class:"material-icons"},"",-1),se=t("h4",null,"相關規格/",-1),ce=t("hr",null,null,-1),ne=["href"],le=t("div",{id:"mid_right_shape"},null,-1),de=t("div",{id:"bottom_left_shape"},null,-1);function ie(r,d,_,e,y,v){const g=C("Header"),k=C("ProductMenu"),P=C("Footer");return s(),c(I,null,[b(g),t("main",z,[A,t("div",O,[t("div",R,[b(k,{categories:e.products},null,8,["categories"]),t("div",W,[Object.keys(e.product).length>0?(s(),c("div",q,[t("div",G,[J,t("a",{href:`/${e.locale}/`},i(r.$t("header.index")),9,Q),f(" / "),t("a",{href:`/${e.locale}/product`},i(r.$t("header.product")),9,U),e.product.category_id?(s(),c("span",X,[(s(!0),c(I,null,H(e.categoryPath,(a,m)=>(s(),c("span",{key:m},[f(" / "),t("a",{href:`/${e.locale}/product/category/${a.id}`},i(a.get_title_attribute.find(u=>u.language==e.locale).meta_value),9,Y)]))),128))])):w("",!0)]),t("div",Z,[t("img",{src:e.getInfo(e.product,"feature_image"),class:"img-fluid w-100"},null,8,K)]),t("div",$,[t("div",null,[t("h3",ee,i(e.getInfo(e.product,"title")),1),te,t("p",{class:"subtitle",innerHTML:e.getInfo(e.product,"content")},null,8,oe)]),e.checkCart?(s(),c("div",{key:1,class:"askPrice remove",role:"button",onClick:d[1]||(d[1]=a=>e.removeCartItem())},[f(i(r.$t("product.removeAskPrice"))+" ",1),re])):(s(),c("div",{key:0,class:"askPrice",role:"button",onClick:d[0]||(d[0]=a=>e.addCartItem())},[f(i(r.$t("product.addAskPrice"))+" ",1),ae]))])])):w("",!0),se,ce,e.product&&e.product.spec_articles?(s(!0),c(I,{key:1},H(e.product.spec_articles,(a,m)=>{var u,p;return s(),c("div",{key:a.id,class:E(m%2===0?"spec_tag_1":"spec_tag_2")},[t("a",{href:`/${e.locale}/spec/${a.id}`},i(((u=a.article_detail.find(o=>o.language===e.locale))==null?void 0:u.meta_value)||((p=a.article_detail.find(o=>o.language==="zh_TW"))==null?void 0:p.meta_value)),9,ne)],2)}),128)):w("",!0)])])]),le,de]),b(P)],64)}const he=N(x,[["render",ie]]);export{he as default};
