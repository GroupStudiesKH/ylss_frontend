import{m as D,r as l,o as N,c as d,d as _,_ as O,u as U,a as B,b as S,e as P,f as t,t as s,h as I,n as u,p as k,v as C,F,j as E,g as L}from"./index-1a425326.js";import{H as x,F as j,c as A,a as J}from"./Footer-4e5f4386.js";const X=D({__name:"vueRecaptcha",props:{sitekey:{type:String,required:!0},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"light"},hl:{type:String,required:!1},loadingTimeout:{type:Number,required:!1,default:0}},emits:{verify:n=>n!=null&&n!="",error:n=>n,expire:null,fail:null},setup(n,{expose:c,emit:m}){const e=n,y=l(null);let v=null;c({execute:function(){window.grecaptcha.execute(v)},reset:function(){window.grecaptcha.reset(v)}});function p(){v=window.grecaptcha.render(y.value,{sitekey:e.sitekey,theme:e.theme,size:e.size,callback:a=>m("verify",a),"expired-callback":()=>m("expire"),"error-callback":()=>m("fail")})}return N(()=>{window.grecaptcha==null?new Promise((a,h)=>{let o,r=!1;window.recaptchaReady=function(){r||(r=!0,clearTimeout(o),a())};const i="recaptcha-script",f=H=>()=>{var V;r||(r=!0,clearTimeout(o),(V=document.getElementById(i))==null||V.remove(),h(H))};e.loadingTimeout>0&&(o=setTimeout(f("timeout"),e.loadingTimeout));const T=window.document,g=T.createElement("script");g.id=i,g.onerror=f("error"),g.onabort=f("aborted"),g.setAttribute("src",`https://www.google.com/recaptcha/api.js?onload=recaptchaReady&render=explicit&hl=${e.hl}&_=${+new Date}`),T.head.appendChild(g)}).then(()=>{p()}).catch(a=>{m("error",a)}):p()}),(a,h)=>(d(),_("div",{ref_key:"recaptchaDiv",ref:y},null,512))}}),W="/assets/img/contact_info.webp",Y={components:{Header:x,Footer:j,vueRecaptcha:X},setup(){const n=U(),{locale:c}=B(),m=l(""),e=l(""),y=l(""),v=l(""),p=l(""),a=l([]),h=l(!1),o=l(!1),r=l(""),i=async w=>{await A.removeCart(w),a.value=A.getCart()},f=l({contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1}),T=()=>{a.value=A.getCart()},g=w=>{r.value=w},H=async()=>{if(!r.value){console.error("Please complete the reCAPTCHA");return}h.value=!0;let w=[];for(let b in a.value){let R=a.value[b].product.product_detail.find(q=>q.language==c.value&&q.meta_key=="title").meta_value??"",z=a.value[b].category.length>0?a.value[b].category[0].get_title_attribute.find(q=>q.language==c.value).meta_value:"";w.push({title:R,category:z,id:a.value[b].product.id})}const M=await J.sendContact({contact_name:m.value,contact_company:e.value,contact_phone:y.value,contact_email:v.value,contact_content:p.value,cart:JSON.stringify(w),recaptcha_token:r.value});if(f.value={contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1},M.hasOwnProperty("errors"))for(let b in M.errors)f.value[b]=!0;h.value=!1,M.hasOwnProperty("success")&&(o.value=!0)},V=()=>{n.push({name:"home"})};return N(()=>{T()}),{locale:c,contact_name:m,contact_company:e,contact_phone:y,contact_email:v,contact_content:p,removeCartItem:i,cartItem:a,submitContact:H,errorMsg:f,isModalOpen:o,goHome:V,isSending:h,onVerify:g}}},Z={id:"contact"},G=t("div",{class:"banner",style:{"background-image":"url('/assets/img/contact_banner.webp')"}},null,-1),K={class:"container"},Q={class:"row"},$={class:"col-12 list",id:"contact_content"},tt={class:"row"},et={class:"col-12 route"},ot=t("span",{class:"material-icons"},"",-1),nt=["href"],ct=["href"],at={class:"col-12"},st={class:"contact-container"},lt={class:"row"},rt=["innerHTML"],it={class:"row"},dt={for:"contact_name"},_t={for:"contact_company"},mt={class:"row"},ht={for:"contact_phone"},ut={for:"contact_email"},vt={class:"row"},pt={class:"col-12"},ft={for:"contact_content"},gt={class:"col-12"},yt={class:"contact-container"},wt=t("hr",null,null,-1),bt={class:"row mt-3"},kt={class:"col-12 secondHeading"},Ct={key:0,class:"row mt-3"},Tt={class:"row"},Vt={class:"col-10"},qt=["href"],Ht=["href"],Mt=["onClick"],St=t("div",null,"X",-1),Pt=[St],At={key:1,class:"row mt-3"},It={class:"col-12 askPriceContent"},Ft=t("hr",null,null,-1),Nt={class:"row mt-3"},Rt={class:"col-12"},zt={class:"row mt-3"},Dt={class:"col-12"},Ot={key:1,class:"btn btn-secondary"},Ut=t("img",{id:"contact_info_pc",src:W},null,-1),Bt=t("div",{class:"contact_bottom"},null,-1),Et=t("div",{id:"mid_right_shape"},null,-1),Lt=t("div",{id:"bottom_left_shape"},null,-1),xt={key:0,class:"modal",style:{display:"block"}},jt={class:"modal-dialog"},Jt={class:"modal-content"},Xt={class:"modal-header"},Wt={class:"modal-title"},Yt={class:"modal-body"},Zt={class:"modal-footer"};function Gt(n,c,m,e,y,v){const p=S("Header"),a=S("vue-recaptcha"),h=S("Footer");return d(),_(F,null,[P(p),t("main",Z,[G,t("div",K,[t("div",Q,[t("div",$,[t("div",tt,[t("div",et,[ot,t("a",{href:`/${e.locale}/`},s(n.$t("header.index")),9,nt),I(" / "),t("a",{href:`/${e.locale}/contact`},s(n.$t("header.contact")),9,ct)]),t("form",null,[t("div",at,[t("div",st,[t("div",lt,[t("div",{class:"col-12 heading",innerHTML:n.$t("contact.heading")},null,8,rt)]),t("div",it,[t("div",{class:u(["col-sm-6 col-12 required",e.contact_name.length>0?"hasContent":""])},[t("label",dt,s(e.contact_name.length==0?n.$t("contact.name"):""),1),k(t("input",{type:"text",id:"contact_name",name:"contact_name","onUpdate:modelValue":c[0]||(c[0]=o=>e.contact_name=o),class:u(["form-control",e.errorMsg.contact_name?"error":""])},null,2),[[C,e.contact_name]])],2),t("div",{class:u(["col-sm-6 col-12 required",e.contact_company.length>0?"hasContent":""])},[t("label",_t,s(e.contact_company.length==0?n.$t("contact.company"):""),1),k(t("input",{type:"text",class:u(["form-control",e.errorMsg.contact_company?"error":""]),id:"contact_company","onUpdate:modelValue":c[1]||(c[1]=o=>e.contact_company=o),name:"contact_company"},null,2),[[C,e.contact_company]])],2)]),t("div",mt,[t("div",{class:u(["col-sm-6 col-12 required",e.contact_phone.length>0?"hasContent":""])},[t("label",ht,s(e.contact_phone.length==0?n.$t("contact.phone"):""),1),k(t("input",{type:"text",class:u(["form-control",e.errorMsg.contact_phone?"error":""]),id:"contact_phone","onUpdate:modelValue":c[2]||(c[2]=o=>e.contact_phone=o),name:"contact_phone"},null,2),[[C,e.contact_phone]])],2),t("div",{class:u(["col-sm-6 col-12 required",e.contact_email.length>0?"hasContent":""])},[t("label",ut,s(e.contact_email.length==0?n.$t("contact.email"):""),1),k(t("input",{type:"email",class:u(["form-control",e.errorMsg.contact_email?"error":""]),id:"contact_email","onUpdate:modelValue":c[3]||(c[3]=o=>e.contact_email=o),name:"contact_email"},null,2),[[C,e.contact_email]])],2)]),t("div",vt,[t("div",pt,[t("label",ft,s(e.contact_content.length==0?n.$t("contact.content"):""),1),k(t("textarea",{class:"form-control",id:"contact_content",name:"contact_content",rows:"15","onUpdate:modelValue":c[4]||(c[4]=o=>e.contact_content=o)},null,512),[[C,e.contact_content]])])])])]),t("div",gt,[t("div",yt,[wt,t("div",bt,[t("div",kt,s(n.$t("contact.askingPrice")),1)]),e.cartItem.length?(d(),_("div",Ct,[(d(!0),_(F,null,E(e.cartItem,(o,r)=>(d(),_("div",{class:"col-12 askPriceContent",key:r},[t("div",Tt,[t("div",Vt,[I(" ・"),t("a",{href:`/${e.locale}/product/${o.product.id}`,class:"category"},s(o.category.length>0?o.category[1].get_title_attribute.find(i=>i.language==e.locale).meta_value:""),9,qt),t("a",{class:"product",href:`/${e.locale}/product/${o.product.id}`},s(o.product.product_detail.find(i=>i.language==e.locale&&i.meta_key=="title").meta_value??""),9,Ht)]),t("div",{class:"col-2 remove",onClick:i=>e.removeCartItem(o.product.id)},Pt,8,Mt)])]))),128))])):(d(),_("div",At,[t("div",It,s(n.$t("contact.askingPriceEmpty")),1)])),Ft,t("div",Nt,[t("div",Rt,[P(a,{sitekey:"6Ldml2YqAAAAAC4kqgtZmD6cJa6tNi_m0fkovXdw",size:"normal",theme:"light",hl:"zh-TW",onVerify:e.onVerify,ref:"vueRecaptcha"},null,8,["onVerify"])])]),t("div",zt,[t("div",Dt,[e.isSending?(d(),_("div",Ot,s(n.$t("contact.isSending")),1)):(d(),_("div",{key:0,class:"btn btn-danger",onClick:c[5]||(c[5]=o=>e.submitContact())},s(n.$t("contact.submit")),1))])])])])])])])]),Ut]),Bt,Et,Lt]),e.isModalOpen?(d(),_("div",xt,[t("div",jt,[t("div",Jt,[t("div",Xt,[t("h5",Wt,s(n.$t("contact.successTitle")),1),t("button",{type:"button",class:"btn-close",onClick:c[6]||(c[6]=o=>e.goHome())})]),t("div",Yt,[t("p",null,s(n.$t("contact.success")),1)]),t("div",Zt,[t("button",{type:"button",class:"btn btn-secondary",onClick:c[7]||(c[7]=o=>e.goHome())},s(n.$t("contact.close")),1)])])])])):L("",!0),P(h)],64)}const $t=O(Y,[["render",Gt]]);export{$t as default};
