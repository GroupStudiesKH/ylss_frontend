import{_ as L,a as N,r as h,k as T,o as V,b as C,c as n,d as l,e as I,f as e,t as i,h as f,F as w,j as F,g as M,n as A}from"./index-5ca54171.js";import{H as B,F as D,a as E,c as H}from"./Footer-b752182f.js";import{P as S}from"./ProductMenu-d470f392.js";const j={components:{Header:B,Footer:D,ProductMenu:S},setup(){const{locale:c}=N(),d=h({}),u=h({}),t=T(),y=h(t.params.id),v=h(!1),g=h([]),k=async()=>{try{d.value=await E.getProducts()}catch(o){console.error("Error fetching products content:",o)}},P=async()=>{try{u.value=await E.getProduct(y.value),u.value.category_id&&a(u.value.category_id),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("#product_detail_content").forEach(r=>{const b=r.getElementsByTagName("a");for(let s of b)s.setAttribute("target","_blank")})})}catch(o){console.error("Error fetching product content:",o)}},a=async o=>{try{const r=await E.getCategoryPath(o);g.value=r}catch(r){console.log(r)}},m=(o,r)=>{let b=r=="feature_image"?"/assets/img/product_image.png?t=202403031739":"";return o.product_detail.find(s=>s.language==c.value&&s.meta_key==r).meta_value!=null&&o.product_detail.find(s=>s.language==c.value&&s.meta_key==r).meta_value!=""?o.product_detail.find(s=>s.language==c.value&&s.meta_key==r).meta_value:b},_=()=>{H.addCart({product:u.value,category:g.value}),v.value=!0},p=()=>{H.removeCart(y),v.value=!1};return V(async()=>{k(),P()}),{locale:c,products:d,product:u,addCartItem:_,removeCartItem:p,checkCart:v,getInfo:m,getCategoryPath:a,categoryPath:g}}},x={id:"product_detail"},z=e("div",{class:"banner",style:{"background-image":"url('/assets/img/product_banner.webp')"}},null,-1),O={class:"container"},q={class:"row"},R={class:"col-12 col-lg-10 list",id:"product_detail_content"},W={key:0,class:"row mb-5"},G={class:"col-12 route"},J=e("span",{class:"material-icons"},"",-1),Q=["href"],U=["href"],X={key:0},Y={class:"col-12 col-md-6"},Z=["src"],K={class:"col-12 col-md-6 justify-content-between",style:{display:"grid"}},$={class:"title"},ee=e("hr",{style:{"border-top":"5px solid #666"}},null,-1),te=["innerHTML"],oe=e("span",{class:"material-icons"},"",-1),ae=e("span",{class:"material-icons"},"",-1),re=e("h4",null,"相關規格/",-1),se=e("hr",null,null,-1),ce=["href"],ne=e("div",{id:"mid_right_shape"},null,-1),le=e("div",{id:"bottom_left_shape"},null,-1);function de(c,d,u,t,y,v){const g=C("Header"),k=C("ProductMenu"),P=C("Footer");return n(),l(w,null,[I(g),e("main",x,[z,e("div",O,[e("div",q,[I(k,{categories:t.products},null,8,["categories"]),e("div",R,[Object.keys(t.product).length>0?(n(),l("div",W,[e("div",G,[J,e("a",{href:`/${t.locale}/`},i(c.$t("header.index")),9,Q),f(" / "),e("a",{href:`/${t.locale}/product`},i(c.$t("header.product")),9,U),t.product.category_id?(n(),l("span",X,[(n(!0),l(w,null,F(t.categoryPath,(a,m)=>(n(),l("span",{key:m},[f(" / "),e("a",null,i(a.get_title_attribute.find(_=>_.language==t.locale).meta_value),1)]))),128))])):M("",!0)]),e("div",Y,[e("img",{src:t.getInfo(t.product,"feature_image"),class:"img-fluid w-100"},null,8,Z)]),e("div",K,[e("div",null,[e("h3",$,i(t.getInfo(t.product,"title")),1),ee,e("p",{class:"subtitle",innerHTML:t.getInfo(t.product,"content")},null,8,te)]),t.checkCart?(n(),l("div",{key:1,class:"askPrice remove",role:"button",onClick:d[1]||(d[1]=a=>t.removeCartItem())},[f(i(c.$t("product.removeAskPrice"))+" ",1),ae])):(n(),l("div",{key:0,class:"askPrice",role:"button",onClick:d[0]||(d[0]=a=>t.addCartItem())},[f(i(c.$t("product.addAskPrice"))+" ",1),oe]))])])):M("",!0),re,se,t.product&&t.product.spec_articles?(n(!0),l(w,{key:1},F(t.product.spec_articles,(a,m)=>{var _,p;return n(),l("div",{key:a.id,class:A(m%2===0?"spec_tag_1":"spec_tag_2")},[e("a",{href:`/${t.locale}/spec/${a.id}`},i(((_=a.article_detail.find(o=>o.language===t.locale))==null?void 0:_.meta_value)||((p=a.article_detail.find(o=>o.language==="zh_TW"))==null?void 0:p.meta_value)),9,ce)],2)}),128)):M("",!0)])])]),ne,le]),I(P)],64)}const ge=L(j,[["render",de]]);export{ge as default};
