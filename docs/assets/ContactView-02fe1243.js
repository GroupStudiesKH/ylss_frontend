import{_ as D,u as R,a as A,r as l,s as E,o as z,b as P,c as i,d as r,e as u,f as t,w as b,k as h,n as d,t as c,v as g,x as p,F as N,g as J,h as X}from"./index-2f5218d6.js";import{H as j,F as G,c as S}from"./Footer-9423c63e.js";import{A as K}from"./AppliedMenu-8548e47e.js";import{a as Q}from"./api-service-70394661.js";const W={components:{Header:j,Footer:G,AppliedMenu:K},setup(){const a=R(),{locale:e}=A(),k=l(""),o=l(""),C=l(""),w=l(""),y=l(""),s=l([]),v=l(!1),n=l(!1),{executeRecaptcha:M,recaptchaLoaded:_}=E(),O=async V=>{await S.removeCart(V),s.value=S.getCart()},H=l({contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1}),T=()=>{s.value=S.getCart()},U=async()=>{v.value=!0,await _();const V=await M("submit");let F=[];for(let m in s.value){let L=s.value[m].product.product_detail.find(f=>f.language==e.value&&f.meta_key=="title").meta_value??"",B=s.value[m].category.length>0?s.value[m].category[0].get_title_attribute.find(f=>f.language==e.value).meta_value:"";F.push({title:L,category:B,id:s.value[m].product.id})}const I=await Q.sendContact({contact_name:k.value,contact_company:o.value,contact_phone:C.value,contact_email:w.value,contact_content:y.value,cart:JSON.stringify(F),recaptcha_token:V});if(H.value={contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1},I.hasOwnProperty("errors"))for(let m in I.errors)H.value[m]=!0;v.value=!1,I.hasOwnProperty("success")&&(n.value=!0)},q=()=>{a.push({name:"home"})};return z(()=>{T()}),{locale:e,contact_name:k,contact_company:o,contact_phone:C,contact_email:w,contact_content:y,removeCartItem:O,cartItem:s,submitContact:U,errorMsg:H,isModalOpen:n,goHome:q,isSending:v}}},Y={id:"contact"},Z=t("div",{class:"banner",style:{"background-image":"url('/assets/img/contact_banner.webp')"}},null,-1),x={class:"container"},$={class:"row"},tt={class:"col-12 list",id:"contact_content"},ot={class:"row"},nt={class:"col-12 route"},et=t("span",{class:"material-icons"},"",-1),at={class:"col-12"},ct={class:"contact-container"},st={class:"row"},lt=["innerHTML"],it={class:"row"},rt={for:"contact_name"},dt={for:"contact_company"},_t={class:"row"},mt={for:"contact_phone"},ut={for:"contact_email"},ht={class:"row"},vt={class:"col-12"},gt={for:"contact_content"},pt={class:"col-12"},yt={class:"contact-container"},ft=t("hr",null,null,-1),bt={class:"row mt-3"},kt={class:"col-12 secondHeading"},Ct={key:0,class:"row mt-3"},wt={class:"row"},Mt={class:"col-10"},Ht=["onClick"],Vt=t("div",null,"X",-1),It=[Vt],Pt={key:1,class:"row mt-3"},St={class:"col-12 askPriceContent"},Ft=t("hr",null,null,-1),Nt={class:"row mt-3"},Ot={class:"col-12"},Tt={key:1,class:"btn btn-secondary"},Ut=t("div",{class:"contact_bottom"},null,-1),qt=t("div",{id:"mid_right_shape"},null,-1),Lt=t("div",{id:"bottom_left_shape"},null,-1),Bt={key:0,class:"modal",style:{display:"block"}},Dt={class:"modal-dialog"},Rt={class:"modal-content"},At={class:"modal-header"},Et={class:"modal-title"},zt={class:"modal-body"},Jt={class:"modal-footer"};function Xt(a,e,k,o,C,w){const y=P("Header"),s=P("router-link"),v=P("Footer");return i(),r(N,null,[u(y),t("main",Y,[Z,t("div",x,[t("div",$,[t("div",tt,[t("div",ot,[t("div",nt,[et,u(s,{to:{name:"home"}},{default:b(()=>[h(c(a.$t("header.index")),1)]),_:1}),h(" / "),u(s,{to:{name:"contact"}},{default:b(()=>[h(c(a.$t("header.contact")),1)]),_:1})]),t("form",null,[t("div",at,[t("div",ct,[t("div",st,[t("div",{class:"col-12 heading",innerHTML:a.$t("contact.heading")},null,8,lt)]),t("div",it,[t("div",{class:d(["col-sm-6 col-12 required",o.contact_name.length>0?"hasContent":""])},[t("label",rt,c(o.contact_name.length==0?a.$t("contact.name"):""),1),g(t("input",{type:"text",id:"contact_name",name:"contact_name","onUpdate:modelValue":e[0]||(e[0]=n=>o.contact_name=n),class:d(["form-control",o.errorMsg.contact_name?"error":""])},null,2),[[p,o.contact_name]])],2),t("div",{class:d(["col-sm-6 col-12 required",o.contact_company.length>0?"hasContent":""])},[t("label",dt,c(o.contact_company.length==0?a.$t("contact.company"):""),1),g(t("input",{type:"text",class:d(["form-control",o.errorMsg.contact_company?"error":""]),id:"contact_company","onUpdate:modelValue":e[1]||(e[1]=n=>o.contact_company=n),name:"contact_company"},null,2),[[p,o.contact_company]])],2)]),t("div",_t,[t("div",{class:d(["col-sm-6 col-12 required",o.contact_phone.length>0?"hasContent":""])},[t("label",mt,c(o.contact_phone.length==0?a.$t("contact.phone"):""),1),g(t("input",{type:"text",class:d(["form-control",o.errorMsg.contact_phone?"error":""]),id:"contact_phone","onUpdate:modelValue":e[2]||(e[2]=n=>o.contact_phone=n),name:"contact_phone"},null,2),[[p,o.contact_phone]])],2),t("div",{class:d(["col-sm-6 col-12 required",o.contact_email.length>0?"hasContent":""])},[t("label",ut,c(o.contact_email.length==0?a.$t("contact.email"):""),1),g(t("input",{type:"email",class:d(["form-control",o.errorMsg.contact_email?"error":""]),id:"contact_email","onUpdate:modelValue":e[3]||(e[3]=n=>o.contact_email=n),name:"contact_email"},null,2),[[p,o.contact_email]])],2)]),t("div",ht,[t("div",vt,[t("label",gt,c(o.contact_content.length==0?a.$t("contact.content"):""),1),g(t("textarea",{class:"form-control",id:"contact_content",name:"contact_content",rows:"15","onUpdate:modelValue":e[4]||(e[4]=n=>o.contact_content=n)},null,512),[[p,o.contact_content]])])])])]),t("div",pt,[t("div",yt,[ft,t("div",bt,[t("div",kt,c(a.$t("contact.askingPrice")),1)]),o.cartItem.length?(i(),r("div",Ct,[(i(!0),r(N,null,J(o.cartItem,(n,M)=>(i(),r("div",{class:"col-12 askPriceContent",key:M},[t("div",wt,[t("div",Mt,[h(" ・"),u(s,{to:{name:"category-product",params:{categoryID:n.product.category_id}},class:"category"},{default:b(()=>[h(c(n.category.length>0?n.category[0].get_title_attribute.find(_=>_.language==o.locale).meta_value:""),1)]),_:2},1032,["to"]),u(s,{class:"product",to:{name:"product-detail",params:{id:n.product.id}}},{default:b(()=>[h(" > "+c(n.product.product_detail.find(_=>_.language==o.locale&&_.meta_key=="title").meta_value??""),1)]),_:2},1032,["to"])]),t("div",{class:"col-2 remove",onClick:_=>o.removeCartItem(n.product.id)},It,8,Ht)])]))),128))])):(i(),r("div",Pt,[t("div",St,c(a.$t("contact.askingPriceEmpty")),1)])),Ft,t("div",Nt,[t("div",Ot,[o.isSending?(i(),r("div",Tt,c(a.$t("contact.isSending")),1)):(i(),r("div",{key:0,class:"btn btn-danger",onClick:e[5]||(e[5]=n=>o.submitContact())},c(a.$t("contact.submit")),1))])])])])])])])])]),Ut,qt,Lt]),o.isModalOpen?(i(),r("div",Bt,[t("div",Dt,[t("div",Rt,[t("div",At,[t("h5",Et,c(a.$t("contact.successTitle")),1),t("button",{type:"button",class:"btn-close",onClick:e[6]||(e[6]=n=>o.goHome())})]),t("div",zt,[t("p",null,c(a.$t("contact.success")),1)]),t("div",Jt,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[7]||(e[7]=n=>o.goHome())},c(a.$t("contact.close")),1)])])])])):X("",!0),u(v)],64)}const Wt=D(W,[["render",Xt]]);export{Wt as default};
