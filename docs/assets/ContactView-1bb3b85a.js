import{_ as N,a as O,r,q as J,o as T,c as l,d as i,f as t,F as q,g as U,t as s,p as X,l as j,u as G,s as K,b as V,e as y,w,k as f,n as m,v as b,x as C,h as Q}from"./index-e423a99f.js";import{H as W,F as Y,c as P}from"./Footer-8e702023.js";import{a as A}from"./api-service-70394661.js";const Z={name:"AppliedMenu",setup(){const{t:e,locale:n}=O(),u=r([]),o=J().query.category,v=async()=>{try{const _=await A.getAppliedCategory();u.value=_}catch(_){console.log(_)}};return T(()=>{v()}),{categories:u,currentCategory:o,locale:n}}},B=e=>(X("data-v-304b9d79"),e=e(),j(),e),$={class:"col-12 col-lg-2 category"},tt=B(()=>t("a",{class:"btn btn-primary",id:"appliedMenuBtn","data-bs-toggle":"collapse",href:"#appliedMenu",role:"button","aria-expanded":"false","aria-controls":"appliedMenu"}," 開啟分類選單 ",-1)),ot={class:"collapse col-12 category",id:"appliedMenu"},et=B(()=>t("div",{class:"title"}," 應用產業 ",-1)),nt={class:"list-group list-group-flush"},at=["href"];function ct(e,n,u,o,v,_){return l(),i("div",$,[tt,t("div",ot,[t("div",null,[et,t("ul",nt,[(l(!0),i(q,null,U(o.categories.filter(d=>d.get_title_attribute.find(c=>c.language==o.locale).meta_value!=null),(d,c)=>(l(),i("li",{class:"list-group-item",key:c},[t("a",{href:`/applied/category/${d.id}`},s(d.get_title_attribute.find(h=>h.language==o.locale).meta_value),9,at)]))),128))])])])])}const st=N(Z,[["render",ct],["__scopeId","data-v-304b9d79"]]),lt="/assets/img/contact_info.webp",it={components:{Header:W,Footer:Y,AppliedMenu:st},setup(){const e=G(),{locale:n}=O(),u=r(""),o=r(""),v=r(""),_=r(""),d=r(""),c=r([]),h=r(!1),a=r(!1),{executeRecaptcha:M,recaptchaLoaded:p}=K(),L=async H=>{await P.removeCart(H),c.value=P.getCart()},I=r({contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1}),R=()=>{c.value=P.getCart()},D=async()=>{h.value=!0,await p();const H=await M("submit");let F=[];for(let g in c.value){let x=c.value[g].product.product_detail.find(k=>k.language==n.value&&k.meta_key=="title").meta_value??"",z=c.value[g].category.length>0?c.value[g].category[0].get_title_attribute.find(k=>k.language==n.value).meta_value:"";F.push({title:x,category:z,id:c.value[g].product.id})}const S=await A.sendContact({contact_name:u.value,contact_company:o.value,contact_phone:v.value,contact_email:_.value,contact_content:d.value,cart:JSON.stringify(F),recaptcha_token:H});if(I.value={contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1},S.hasOwnProperty("errors"))for(let g in S.errors)I.value[g]=!0;h.value=!1,S.hasOwnProperty("success")&&(a.value=!0)},E=()=>{e.push({name:"home"})};return T(()=>{R()}),{locale:n,contact_name:u,contact_company:o,contact_phone:v,contact_email:_,contact_content:d,removeCartItem:L,cartItem:c,submitContact:D,errorMsg:I,isModalOpen:a,goHome:E,isSending:h}}},rt={id:"contact"},dt=t("div",{class:"banner",style:{"background-image":"url('/assets/img/contact_banner.webp')"}},null,-1),_t={class:"container"},mt={class:"row"},ut={class:"col-12 list",id:"contact_content"},ht={class:"row"},pt={class:"col-12 route"},vt=t("span",{class:"material-icons"},"",-1),gt={class:"col-12"},yt={class:"contact-container"},ft={class:"row"},bt=["innerHTML"],Ct={class:"row"},kt={for:"contact_name"},wt={for:"contact_company"},Mt={class:"row"},It={for:"contact_phone"},Ht={for:"contact_email"},St={class:"row"},Vt={class:"col-12"},Pt={for:"contact_content"},qt={class:"col-12"},Ft={class:"contact-container"},Nt=t("hr",null,null,-1),Ot={class:"row mt-3"},Tt={class:"col-12 secondHeading"},Ut={key:0,class:"row mt-3"},At={class:"row"},Bt={class:"col-10"},Lt=["onClick"],Rt=t("div",null,"X",-1),Dt=[Rt],Et={key:1,class:"row mt-3"},xt={class:"col-12 askPriceContent"},zt=t("hr",null,null,-1),Jt={class:"row mt-3"},Xt={class:"col-12"},jt={key:1,class:"btn btn-secondary"},Gt=t("div",{class:"contact_bottom"},[t("img",{src:lt})],-1),Kt=t("div",{id:"mid_right_shape"},null,-1),Qt=t("div",{id:"bottom_left_shape"},null,-1),Wt={key:0,class:"modal",style:{display:"block"}},Yt={class:"modal-dialog"},Zt={class:"modal-content"},$t={class:"modal-header"},to={class:"modal-title"},oo={class:"modal-body"},eo={class:"modal-footer"};function no(e,n,u,o,v,_){const d=V("Header"),c=V("router-link"),h=V("Footer");return l(),i(q,null,[y(d),t("main",rt,[dt,t("div",_t,[t("div",mt,[t("div",ut,[t("div",ht,[t("div",pt,[vt,y(c,{to:{name:"home"}},{default:w(()=>[f(s(e.$t("header.index")),1)]),_:1}),f(" / "),y(c,{to:{name:"contact"}},{default:w(()=>[f(s(e.$t("header.contact")),1)]),_:1})]),t("form",null,[t("div",gt,[t("div",yt,[t("div",ft,[t("div",{class:"col-12 heading",innerHTML:e.$t("contact.heading")},null,8,bt)]),t("div",Ct,[t("div",{class:m(["col-sm-6 col-12 required",o.contact_name.length>0?"hasContent":""])},[t("label",kt,s(o.contact_name.length==0?e.$t("contact.name"):""),1),b(t("input",{type:"text",id:"contact_name",name:"contact_name","onUpdate:modelValue":n[0]||(n[0]=a=>o.contact_name=a),class:m(["form-control",o.errorMsg.contact_name?"error":""])},null,2),[[C,o.contact_name]])],2),t("div",{class:m(["col-sm-6 col-12 required",o.contact_company.length>0?"hasContent":""])},[t("label",wt,s(o.contact_company.length==0?e.$t("contact.company"):""),1),b(t("input",{type:"text",class:m(["form-control",o.errorMsg.contact_company?"error":""]),id:"contact_company","onUpdate:modelValue":n[1]||(n[1]=a=>o.contact_company=a),name:"contact_company"},null,2),[[C,o.contact_company]])],2)]),t("div",Mt,[t("div",{class:m(["col-sm-6 col-12 required",o.contact_phone.length>0?"hasContent":""])},[t("label",It,s(o.contact_phone.length==0?e.$t("contact.phone"):""),1),b(t("input",{type:"text",class:m(["form-control",o.errorMsg.contact_phone?"error":""]),id:"contact_phone","onUpdate:modelValue":n[2]||(n[2]=a=>o.contact_phone=a),name:"contact_phone"},null,2),[[C,o.contact_phone]])],2),t("div",{class:m(["col-sm-6 col-12 required",o.contact_email.length>0?"hasContent":""])},[t("label",Ht,s(o.contact_email.length==0?e.$t("contact.email"):""),1),b(t("input",{type:"email",class:m(["form-control",o.errorMsg.contact_email?"error":""]),id:"contact_email","onUpdate:modelValue":n[3]||(n[3]=a=>o.contact_email=a),name:"contact_email"},null,2),[[C,o.contact_email]])],2)]),t("div",St,[t("div",Vt,[t("label",Pt,s(o.contact_content.length==0?e.$t("contact.content"):""),1),b(t("textarea",{class:"form-control",id:"contact_content",name:"contact_content",rows:"15","onUpdate:modelValue":n[4]||(n[4]=a=>o.contact_content=a)},null,512),[[C,o.contact_content]])])])])]),t("div",qt,[t("div",Ft,[Nt,t("div",Ot,[t("div",Tt,s(e.$t("contact.askingPrice")),1)]),o.cartItem.length?(l(),i("div",Ut,[(l(!0),i(q,null,U(o.cartItem,(a,M)=>(l(),i("div",{class:"col-12 askPriceContent",key:M},[t("div",At,[t("div",Bt,[f(" ・"),y(c,{to:{name:"category-product",params:{categoryID:a.product.category_id}},class:"category"},{default:w(()=>[f(s(a.category.length>0?a.category[0].get_title_attribute.find(p=>p.language==o.locale).meta_value:""),1)]),_:2},1032,["to"]),y(c,{class:"product",to:{name:"product-detail",params:{id:a.product.id}}},{default:w(()=>[f(" > "+s(a.product.product_detail.find(p=>p.language==o.locale&&p.meta_key=="title").meta_value??""),1)]),_:2},1032,["to"])]),t("div",{class:"col-2 remove",onClick:p=>o.removeCartItem(a.product.id)},Dt,8,Lt)])]))),128))])):(l(),i("div",Et,[t("div",xt,s(e.$t("contact.askingPriceEmpty")),1)])),zt,t("div",Jt,[t("div",Xt,[o.isSending?(l(),i("div",jt,s(e.$t("contact.isSending")),1)):(l(),i("div",{key:0,class:"btn btn-danger",onClick:n[5]||(n[5]=a=>o.submitContact())},s(e.$t("contact.submit")),1))])])])])])])])])]),Gt,Kt,Qt]),o.isModalOpen?(l(),i("div",Wt,[t("div",Yt,[t("div",Zt,[t("div",$t,[t("h5",to,s(e.$t("contact.successTitle")),1),t("button",{type:"button",class:"btn-close",onClick:n[6]||(n[6]=a=>o.goHome())})]),t("div",oo,[t("p",null,s(e.$t("contact.success")),1)]),t("div",eo,[t("button",{type:"button",class:"btn btn-secondary",onClick:n[7]||(n[7]=a=>o.goHome())},s(e.$t("contact.close")),1)])])])])):Q("",!0),y(h)],64)}const lo=N(it,[["render",no]]);export{lo as default};
