import{_ as N,a as O,r,m as J,o as T,c as l,d as i,f as t,F,g as U,t as s,p as X,l as j,u as G,s as K,b as V,e as y,w,k as f,n as m,v as b,x as C,h as Q}from"./index-85784f17.js";import{H as W,F as Y,c as P}from"./Footer-a566fffe.js";import{a as A}from"./api-service-70394661.js";const Z={name:"AppliedMenu",setup(){const{t:e,locale:n}=O(),u=r([]),o=J().query.category,v=async()=>{try{const _=await A.getAppliedCategory();u.value=_}catch(_){console.log(_)}};return T(()=>{v()}),{categories:u,currentCategory:o,locale:n}}},B=e=>(X("data-v-304b9d79"),e=e(),j(),e),$={class:"col-12 col-lg-2 category"},tt=B(()=>t("a",{class:"btn btn-primary",id:"appliedMenuBtn","data-bs-toggle":"collapse",href:"#appliedMenu",role:"button","aria-expanded":"false","aria-controls":"appliedMenu"}," 開啟分類選單 ",-1)),ot={class:"collapse col-12 category",id:"appliedMenu"},et=B(()=>t("div",{class:"title"}," 應用產業 ",-1)),nt={class:"list-group list-group-flush"},at=["href"];function ct(e,n,u,o,v,_){return l(),i("div",$,[tt,t("div",ot,[t("div",null,[et,t("ul",nt,[(l(!0),i(F,null,U(o.categories.filter(d=>d.get_title_attribute.find(c=>c.language==o.locale).meta_value!=null),(d,c)=>(l(),i("li",{class:"list-group-item",key:c},[t("a",{href:`/applied/category/${d.id}`},s(d.get_title_attribute.find(h=>h.language==o.locale).meta_value),9,at)]))),128))])])])])}const st=N(Z,[["render",ct],["__scopeId","data-v-304b9d79"]]),lt={components:{Header:W,Footer:Y,AppliedMenu:st},setup(){const e=G(),{locale:n}=O(),u=r(""),o=r(""),v=r(""),_=r(""),d=r(""),c=r([]),h=r(!1),a=r(!1),{executeRecaptcha:M,recaptchaLoaded:p}=K(),L=async H=>{await P.removeCart(H),c.value=P.getCart()},I=r({contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1}),R=()=>{c.value=P.getCart()},D=async()=>{h.value=!0,await p();const H=await M("submit");let q=[];for(let g in c.value){let x=c.value[g].product.product_detail.find(k=>k.language==n.value&&k.meta_key=="title").meta_value??"",z=c.value[g].category.length>0?c.value[g].category[0].get_title_attribute.find(k=>k.language==n.value).meta_value:"";q.push({title:x,category:z,id:c.value[g].product.id})}const S=await A.sendContact({contact_name:u.value,contact_company:o.value,contact_phone:v.value,contact_email:_.value,contact_content:d.value,cart:JSON.stringify(q),recaptcha_token:H});if(I.value={contact_name:!1,contact_company:!1,contact_phone:!1,contact_email:!1},S.hasOwnProperty("errors"))for(let g in S.errors)I.value[g]=!0;h.value=!1,S.hasOwnProperty("success")&&(a.value=!0)},E=()=>{e.push({name:"home"})};return T(()=>{R()}),{locale:n,contact_name:u,contact_company:o,contact_phone:v,contact_email:_,contact_content:d,removeCartItem:L,cartItem:c,submitContact:D,errorMsg:I,isModalOpen:a,goHome:E,isSending:h}}},it={id:"contact"},rt=t("div",{class:"banner",style:{"background-image":"url('/assets/img/contact_banner.webp')"}},null,-1),dt={class:"container"},_t={class:"row"},mt={class:"col-12 list",id:"contact_content"},ut={class:"row"},ht={class:"col-12 route"},pt=t("span",{class:"material-icons"},"",-1),vt={class:"col-12"},gt={class:"contact-container"},yt={class:"row"},ft=["innerHTML"],bt={class:"row"},Ct={for:"contact_name"},kt={for:"contact_company"},wt={class:"row"},Mt={for:"contact_phone"},It={for:"contact_email"},Ht={class:"row"},St={class:"col-12"},Vt={for:"contact_content"},Pt={class:"col-12"},Ft={class:"contact-container"},qt=t("hr",null,null,-1),Nt={class:"row mt-3"},Ot={class:"col-12 secondHeading"},Tt={key:0,class:"row mt-3"},Ut={class:"row"},At={class:"col-10"},Bt=["onClick"],Lt=t("div",null,"X",-1),Rt=[Lt],Dt={key:1,class:"row mt-3"},Et={class:"col-12 askPriceContent"},xt=t("hr",null,null,-1),zt={class:"row mt-3"},Jt={class:"col-12"},Xt={key:1,class:"btn btn-secondary"},jt=t("div",{class:"contact_bottom"},null,-1),Gt=t("div",{id:"mid_right_shape"},null,-1),Kt=t("div",{id:"bottom_left_shape"},null,-1),Qt={key:0,class:"modal",style:{display:"block"}},Wt={class:"modal-dialog"},Yt={class:"modal-content"},Zt={class:"modal-header"},$t={class:"modal-title"},to={class:"modal-body"},oo={class:"modal-footer"};function eo(e,n,u,o,v,_){const d=V("Header"),c=V("router-link"),h=V("Footer");return l(),i(F,null,[y(d),t("main",it,[rt,t("div",dt,[t("div",_t,[t("div",mt,[t("div",ut,[t("div",ht,[pt,y(c,{to:{name:"home"}},{default:w(()=>[f(s(e.$t("header.index")),1)]),_:1}),f(" / "),y(c,{to:{name:"contact"}},{default:w(()=>[f(s(e.$t("header.contact")),1)]),_:1})]),t("form",null,[t("div",vt,[t("div",gt,[t("div",yt,[t("div",{class:"col-12 heading",innerHTML:e.$t("contact.heading")},null,8,ft)]),t("div",bt,[t("div",{class:m(["col-sm-6 col-12 required",o.contact_name.length>0?"hasContent":""])},[t("label",Ct,s(o.contact_name.length==0?e.$t("contact.name"):""),1),b(t("input",{type:"text",id:"contact_name",name:"contact_name","onUpdate:modelValue":n[0]||(n[0]=a=>o.contact_name=a),class:m(["form-control",o.errorMsg.contact_name?"error":""])},null,2),[[C,o.contact_name]])],2),t("div",{class:m(["col-sm-6 col-12 required",o.contact_company.length>0?"hasContent":""])},[t("label",kt,s(o.contact_company.length==0?e.$t("contact.company"):""),1),b(t("input",{type:"text",class:m(["form-control",o.errorMsg.contact_company?"error":""]),id:"contact_company","onUpdate:modelValue":n[1]||(n[1]=a=>o.contact_company=a),name:"contact_company"},null,2),[[C,o.contact_company]])],2)]),t("div",wt,[t("div",{class:m(["col-sm-6 col-12 required",o.contact_phone.length>0?"hasContent":""])},[t("label",Mt,s(o.contact_phone.length==0?e.$t("contact.phone"):""),1),b(t("input",{type:"text",class:m(["form-control",o.errorMsg.contact_phone?"error":""]),id:"contact_phone","onUpdate:modelValue":n[2]||(n[2]=a=>o.contact_phone=a),name:"contact_phone"},null,2),[[C,o.contact_phone]])],2),t("div",{class:m(["col-sm-6 col-12 required",o.contact_email.length>0?"hasContent":""])},[t("label",It,s(o.contact_email.length==0?e.$t("contact.email"):""),1),b(t("input",{type:"email",class:m(["form-control",o.errorMsg.contact_email?"error":""]),id:"contact_email","onUpdate:modelValue":n[3]||(n[3]=a=>o.contact_email=a),name:"contact_email"},null,2),[[C,o.contact_email]])],2)]),t("div",Ht,[t("div",St,[t("label",Vt,s(o.contact_content.length==0?e.$t("contact.content"):""),1),b(t("textarea",{class:"form-control",id:"contact_content",name:"contact_content",rows:"15","onUpdate:modelValue":n[4]||(n[4]=a=>o.contact_content=a)},null,512),[[C,o.contact_content]])])])])]),t("div",Pt,[t("div",Ft,[qt,t("div",Nt,[t("div",Ot,s(e.$t("contact.askingPrice")),1)]),o.cartItem.length?(l(),i("div",Tt,[(l(!0),i(F,null,U(o.cartItem,(a,M)=>(l(),i("div",{class:"col-12 askPriceContent",key:M},[t("div",Ut,[t("div",At,[f(" ・"),y(c,{to:{name:"category-product",params:{categoryID:a.product.category_id}},class:"category"},{default:w(()=>[f(s(a.category.length>0?a.category[0].get_title_attribute.find(p=>p.language==o.locale).meta_value:""),1)]),_:2},1032,["to"]),y(c,{class:"product",to:{name:"product-detail",params:{id:a.product.id}}},{default:w(()=>[f(" > "+s(a.product.product_detail.find(p=>p.language==o.locale&&p.meta_key=="title").meta_value??""),1)]),_:2},1032,["to"])]),t("div",{class:"col-2 remove",onClick:p=>o.removeCartItem(a.product.id)},Rt,8,Bt)])]))),128))])):(l(),i("div",Dt,[t("div",Et,s(e.$t("contact.askingPriceEmpty")),1)])),xt,t("div",zt,[t("div",Jt,[o.isSending?(l(),i("div",Xt,s(e.$t("contact.isSending")),1)):(l(),i("div",{key:0,class:"btn btn-danger",onClick:n[5]||(n[5]=a=>o.submitContact())},s(e.$t("contact.submit")),1))])])])])])])])])]),jt,Gt,Kt]),o.isModalOpen?(l(),i("div",Qt,[t("div",Wt,[t("div",Yt,[t("div",Zt,[t("h5",$t,s(e.$t("contact.successTitle")),1),t("button",{type:"button",class:"btn-close",onClick:n[6]||(n[6]=a=>o.goHome())})]),t("div",to,[t("p",null,s(e.$t("contact.success")),1)]),t("div",oo,[t("button",{type:"button",class:"btn btn-secondary",onClick:n[7]||(n[7]=a=>o.goHome())},s(e.$t("contact.close")),1)])])])])):Q("",!0),y(h)],64)}const so=N(lt,[["render",eo]]);export{so as default};
