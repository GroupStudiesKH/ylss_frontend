import{_ as N,a as T,r as h,k as V,o as A,l as B,b as C,c as n,d as l,e as I,f as e,t as i,h as f,F as w,j as M,g as F,n as S}from"./index-3da876c0.js";import{H as j,F as D,a as H,c as E}from"./Footer-2577ff1c.js";import{P as L}from"./ProductMenu-722ef2db.js";const x={components:{Header:j,Footer:D,ProductMenu:L},setup(){const{locale:c}=T(),d=h({}),_=h({}),t=V(),y=h(t.params.id),p=h(!1),g=h([]),k=async()=>{try{d.value=await H.getProducts()}catch(o){console.error("Error fetching products content:",o)}},P=async()=>{try{_.value=await H.getProduct(y.value),_.value.category_id&&a(_.value.category_id)}catch(o){console.error("Error fetching product content:",o)}},a=async o=>{try{const s=await H.getCategoryPath(o);g.value=s}catch(s){console.log(s)}},m=(o,s)=>{let b=s=="feature_image"?"/assets/img/product_image.png?t=202403031739":"";return o.product_detail.find(r=>r.language==c.value&&r.meta_key==s).meta_value!=null&&o.product_detail.find(r=>r.language==c.value&&r.meta_key==s).meta_value!=""?o.product_detail.find(r=>r.language==c.value&&r.meta_key==s).meta_value:b},u=()=>{E.addCart({product:_.value,category:g.value}),p.value=!0},v=()=>{E.removeCart(y),p.value=!1};return A(async()=>{k(),P()}),B(()=>{document.querySelectorAll("#product_detail_content").forEach(s=>{const b=s.getElementsByTagName("a");for(let r of b)r.setAttribute("target","_blank")})}),{locale:c,products:d,product:_,addCartItem:u,removeCartItem:v,checkCart:p,getInfo:m,getCategoryPath:a,categoryPath:g}}},z={id:"product_detail"},q=e("div",{class:"banner",style:{"background-image":"url('/assets/img/product_banner.webp')"}},null,-1),O={class:"container"},R={class:"row"},U={class:"col-12 col-lg-10 list",id:"product_detail_content"},W={key:0,class:"row mb-5"},G={class:"col-12 route"},J=e("span",{class:"material-icons"},"",-1),Q=["href"],X=["href"],Y={key:0},Z={class:"col-12 col-md-6"},K=["src"],$={class:"col-12 col-md-6 justify-content-between",style:{display:"grid"}},ee={class:"title"},te=e("hr",{style:{"border-top":"5px solid #666"}},null,-1),oe=["innerHTML"],ae=e("span",{class:"material-icons"},"",-1),se=e("span",{class:"material-icons"},"",-1),re=e("h4",null,"相關規格/",-1),ce=e("hr",null,null,-1),ne=["href"],le=e("div",{id:"mid_right_shape"},null,-1),de=e("div",{id:"bottom_left_shape"},null,-1);function ie(c,d,_,t,y,p){const g=C("Header"),k=C("ProductMenu"),P=C("Footer");return n(),l(w,null,[I(g),e("main",z,[q,e("div",O,[e("div",R,[I(k,{categories:t.products},null,8,["categories"]),e("div",U,[Object.keys(t.product).length>0?(n(),l("div",W,[e("div",G,[J,e("a",{href:`/${t.locale}/`},i(c.$t("header.index")),9,Q),f(" / "),e("a",{href:`/${t.locale}/product`},i(c.$t("header.product")),9,X),t.product.category_id?(n(),l("span",Y,[(n(!0),l(w,null,M(t.categoryPath,(a,m)=>(n(),l("span",{key:m},[f(" / "),e("a",null,i(a.get_title_attribute.find(u=>u.language==t.locale).meta_value),1)]))),128))])):F("",!0)]),e("div",Z,[e("img",{src:t.getInfo(t.product,"feature_image"),class:"img-fluid w-100"},null,8,K)]),e("div",$,[e("div",null,[e("h3",ee,i(t.getInfo(t.product,"title")),1),te,e("p",{class:"subtitle",innerHTML:t.getInfo(t.product,"content")},null,8,oe)]),t.checkCart?(n(),l("div",{key:1,class:"askPrice remove",role:"button",onClick:d[1]||(d[1]=a=>t.removeCartItem())},[f(i(c.$t("product.removeAskPrice"))+" ",1),se])):(n(),l("div",{key:0,class:"askPrice",role:"button",onClick:d[0]||(d[0]=a=>t.addCartItem())},[f(i(c.$t("product.addAskPrice"))+" ",1),ae]))])])):F("",!0),re,ce,t.product&&t.product.spec_articles?(n(!0),l(w,{key:1},M(t.product.spec_articles,(a,m)=>{var u,v;return n(),l("div",{key:a.id,class:S(m%2===0?"spec_tag_1":"spec_tag_2")},[e("a",{href:`/${t.locale}/spec/${a.id}`},i(((u=a.article_detail.find(o=>o.language===t.locale))==null?void 0:u.meta_value)||((v=a.article_detail.find(o=>o.language==="zh_TW"))==null?void 0:v.meta_value)),9,ne)],2)}),128)):F("",!0)])])]),le,de]),I(P)],64)}const me=N(x,[["render",ie]]);export{me as default};
