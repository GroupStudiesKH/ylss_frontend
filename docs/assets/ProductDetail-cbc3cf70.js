import{_ as T,a as x,r as f,l as B,o as D,b as P,c,d as n,e as u,f as t,w as C,i as d,F as I,g as M,h as F,t as _,n as E}from"./index-7b11ff3d.js";import{H as L,F as S,c as V}from"./Footer-68ad3359.js";import{P as j}from"./ProductMenu-56b6954a.js";import{a as H}from"./api-service-664abc7f.js";const z={components:{Header:L,Footer:S,ProductMenu:j},setup(){const{locale:s}=x(),i=f({}),m=f({}),e=B(),b=f(e.params.id),y=f(!1),v=f([]),w=async()=>{try{i.value=await H.getProducts()}catch(o){console.error("Error fetching products content:",o)}},g=async()=>{try{m.value=await H.getProduct(b.value),m.value.category_id&&k(m.value.category_id)}catch(o){console.error("Error fetching product content:",o)}},k=async o=>{try{const a=await H.getCategoryPath(o);v.value=a}catch(a){console.log(a)}},r=(o,a)=>{let N=a=="feature_image"?"/assets/img/product_image.png?t=202403031739":"";return o.product_detail.find(l=>l.language==s.value&&l.meta_key==a).meta_value!=null&&o.product_detail.find(l=>l.language==s.value&&l.meta_key==a).meta_value!=""?o.product_detail.find(l=>l.language==s.value&&l.meta_key==a).meta_value:N},h=()=>{V.addCart({product:m.value,category:v.value}),y.value=!0},p=()=>{V.removeCart(b),y.value=!1};return D(async()=>{w(),g()}),{locale:s,products:i,product:m,addCartItem:h,removeCartItem:p,checkCart:y,getInfo:r,getCategoryPath:k,categoryPath:v}}},A={id:"product_detail"},O=t("div",{class:"banner",style:{"background-image":"url('/assets/img/product_banner.webp')"}},null,-1),R={class:"container"},W={class:"row"},q={class:"col-12 col-lg-10 list",id:"product_detail_content"},G={key:0,class:"row mb-5"},J={class:"col-12 route"},Q=t("span",{class:"material-icons"},"",-1),U={key:0},X={class:"col-4 col-md-6"},Y=["src"],Z={class:"col-8 col-md-6 justify-content-between",style:{display:"grid"}},K={class:"title"},$=t("hr",{style:{"border-top":"5px solid #666"}},null,-1),ee=["innerHTML"],te=t("span",{class:"material-icons"},"",-1),oe=t("span",{class:"material-icons"},"",-1),ae=t("h4",null,"相關規格/",-1),re=t("hr",null,null,-1),se=t("div",{id:"mid_right_shape"},null,-1),ce=t("div",{id:"bottom_left_shape"},null,-1);function ne(s,i,m,e,b,y){const v=P("Header"),w=P("ProductMenu"),g=P("router-link"),k=P("Footer");return c(),n(I,null,[u(v),t("main",A,[O,t("div",R,[t("div",W,[u(w,{categories:e.products},null,8,["categories"]),t("div",q,[Object.keys(e.product).length>0?(c(),n("div",G,[t("div",J,[Q,u(g,{to:{name:"home"}},{default:C(()=>[d(_(s.$t("header.index")),1)]),_:1}),d(" / "),u(g,{to:{name:"product"}},{default:C(()=>[d(_(s.$t("header.product")),1)]),_:1}),e.product.category_id?(c(),n("span",U,[(c(!0),n(I,null,M(e.categoryPath,(r,h)=>(c(),n("span",{key:h},[d(" / "),u(g,{to:`/product/category/${r.id}`},{default:C(()=>[d(_(r.get_title_attribute.find(p=>p.language==e.locale).meta_value),1)]),_:2},1032,["to"])]))),128))])):F("",!0)]),t("div",X,[t("img",{src:e.getInfo(e.product,"feature_image"),class:"img-fluid w-100"},null,8,Y)]),t("div",Z,[t("div",null,[t("h3",K,_(e.getInfo(e.product,"title")),1),$,t("p",{class:"subtitle",innerHTML:e.getInfo(e.product,"content")},null,8,ee)]),e.checkCart?(c(),n("div",{key:1,class:"askPrice remove",role:"button",onClick:i[1]||(i[1]=r=>e.removeCartItem())},[d(_(s.$t("product.removeAskPrice"))+" ",1),oe])):(c(),n("div",{key:0,class:"askPrice",role:"button",onClick:i[0]||(i[0]=r=>e.addCartItem())},[d(_(s.$t("product.addAskPrice"))+" ",1),te]))])])):F("",!0),ae,re,e.product&&e.product.spec_articles?(c(!0),n(I,{key:1},M(e.product.spec_articles,(r,h)=>(c(),n("div",{key:r.id,class:E(h%2===0?"spec_tag_1":"spec_tag_2")},[u(g,{to:`/spec/${r.id}`},{default:C(()=>{var p,o;return[d(_(((p=r.article_detail.find(a=>a.language===e.locale))==null?void 0:p.meta_value)||((o=r.article_detail.find(a=>a.language==="zh_TW"))==null?void 0:o.meta_value)),1)]}),_:2},1032,["to"])],2))),128)):F("",!0)])])]),se,ce]),u(k)],64)}const _e=T(z,[["render",ne]]);export{_e as default};
